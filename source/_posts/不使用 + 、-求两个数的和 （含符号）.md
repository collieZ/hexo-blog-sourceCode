---
title: 不使用 + 、-求两个数的和 （含符号）
date: 2020-06-19 00:11:23
categories:
 - javascript
tags:
 - algorithm
---



#  不使用 + 、-求两个数的和 （含符号）



**首先想到用位运算符来处理**



* ^ 异或   可以理解为不进位的加法  如:  0010 ^ 0101 = 0111   0 + 0 = 0  | 1+1 = 0 | 1 + 0 = 1
* & 按位与   
* << 按位左移 



### 分析： 

1. 既然 ^ 异或可以得到不进位得值，那么再通过 & 按位与取得需要进位的位， 再 << 按位左移进位就可以取得进位的值
2. 将 **没进位的和** ^  **进位**  
3. 接着再进行以上的操作，**没进位的和** & **进位**     直到 & 的值为0时就代表没有进位了， 就返回 **没进位的和** ^  **进位**  的值



### eg:   

1. 9 + 7 = 1001 +  0111
2. s1 = 1001 ^ 0111 = 1110   |  1001 & 0111 = 0001    |  j1 =  0001 << 1 = 0010
3. j2 = s1 & j1 = 1110 & 0010 = 0010  <<  1 = 0100 (还有进位，继续执行上述步骤)  s2 =  s1 ^ j1 = 1110 ^ 0010 = 1100
4. J3 = j2 & s2 = 0100 & 1100 = 0100 << 1 = 1000      s3 = j2 ^ s2 = 0100 ^ 1100 = 1000
5. J4 = j3 & s3 = 1000 & 1000 = 1000 << 1 = 10000    s4 = j3 ^ s3 = 1000 ^ 1000 = 0000
6. j5 = j4 & s4 = 1 000 & 0000 = 0 0000   s5 = j4 ^ s4 = 1 0000 ^ 0 0000 = 1 0000 = 16



### j s 实现



```javascript
let add = function(a,b) {
    let sum = a ^ b;
    let carry = (a&b) << 1;
    if(a&b) {
        return add(sum, carry);
    } else {
        return sum;
    }
}

add(10, 6)  // 16
add(-2, 8)  // 6
```





### python 实现



```python
#!/usr/bin/python3

def add(a, b):
	if(b == 0):
		return a
	sum = a ^ b
	carry = (a & b) << 1
	return add(sum, carry)
	
	
nums = add(2,99) // 101
```

